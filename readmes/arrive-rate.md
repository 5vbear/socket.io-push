# 离线通知送达率

计算socket.io通道,android的送达率方法

## 1.指定单个/多个设备的送达率 

分子: 收到通知, 客户端回包, +1 

分母: 调用推送api的时候,所传的设备id数/所传uid对应的设备id数

此项指标与业务相关度非常大, 因为很多设备会卸载app, 这些设备必然会收不到推送, 而服务器无法清除这些已经卸载的无效设备.
随着app寿命增加, 无效设备会越来越多, 送达率会越来越低, 当然这个可以通过对设备id设一个过期时间来解决, 不过目前我们并没有做.
此项送达率也跟推送目标有关,比如对一个主播的所有粉丝发推送, 送达率, 跟其僵尸粉数量也有关系.

## 2.全网离线推送送达率

分子: 收到通知, 客户端回包, +1 

分母: 当前全网安卓在线数 - 华为/小米在线数 + TTL内连接到proxy的设备数